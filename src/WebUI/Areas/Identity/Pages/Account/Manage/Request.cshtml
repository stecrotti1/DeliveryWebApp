@page
@using DeliveryWebApp.Domain.Constants
@using DeliveryWebApp.Infrastructure.Security
@model DeliveryWebApp.WebUI.Areas.Identity.Pages.Account.Manage.RequestModel
@{
    ViewData["Title"] = "Change User Request";
}

<h4>@ViewData["Title"]</h4>

@* TODO: push notifications *@

<div class="alert alert-success" role="alert">
    <partial name="_StatusMessage" for="StatusMessage"/>
</div>

@if (Model.Request != null)
{
    @switch (Model.Request.Status)
    {
        case RequestStatus.Idle:
            <div class="alert alert-primary" role="alert">
                <p>Your request to become a @Model.Request.Role has been sent, please wait the administrator.</p>
            </div>
            break;

        case RequestStatus.Accepted:
            <div class="alert alert-success" role="alert">
                <p>Your request to become a @Model.Request.Role has been accepted!</p>

                @if (Model.Request.Role == RoleName.Rider)
                {
                    <p>You are ready to go!</p>
                }
                else
                {
                    <a class="alert-link" asp-page="/Restaurateur/RestaurantDashboard">Please click here to begin</a>
                }
            </div>
            break;

        case RequestStatus.Rejected:
            <div class="alert alert-danger" role="alert">
                <p>Your request to become a @Model.Request.Role has been rejected :(</p>
                @* TODO: Contact administrator? *@
            </div>
            break;
    }
}
else
{
    <h6>If you want to become a rider or a restaurateur and manage your own restaurant, send a request to the system admin</h6>

    <div class="text-center">
        <form method="post">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label asp-for="Input.Role"></label>
                    <select class="form-select" aria-label="Select country" asp-for="Input.Role" asp-items="Model.Roles">
                    </select>
                    <span asp-validation-for="Input.Role" class="text-danger"></span>
                </div>
            </div>
        </form>
    </div>
}