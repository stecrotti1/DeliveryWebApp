@page "{id:int?}"
@using DeliveryWebApp.Infrastructure.Security
@using IdentityServer4.Extensions
@model DeliveryWebApp.WebUI.Pages.Admin.ClientDetailModel
@{
    ViewData["Title"] = "Request Detail";
}

<h1>Detail of Client: @Model.Client.Id</h1>

<div>
    <dl class="row">
        <dt class="col-sm-2">
            First Name
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.FName)
        </dd>
        <dt class="col-sm-2">
            Last Name
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.LName)
        </dd>
        <dt class="col-sm-2">
            Email
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Email)
        </dd>
        @if (!Model.Client.Addresses.IsNullOrEmpty())
        {
            <dt class="col-sm-2">
                Addresses
            </dt>
            @foreach (var address in Model.Client.Addresses)
            {
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => address.ToString())
                </dd>
            }
        }
        <dt class="col-sm-2">
            <button id="edit-role-btn" class="btn btn-outline-dark text-start">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
                </svg>
                Edit Role
            </button>
        </dt>
        <dd class="col-sm-2">
            <select id="role-select" class="form-select" aria-label="Disabled role select" disabled asp-for="Input.Role" asp-items="Model.Roles"></select>
            <span asp-validation-for="Input.Role" class="text-danger"></span>
        </dd>
        @*@if (Model.Input.Role == RoleName.Rider) FIXME
        {*@
            <dt class="col-sm-2">
                Delivery credit
            </dt>

            <dd class="col-sm-2">
                <div class="form-group col-1">
                    <div class="input-group">
                        <label asp-for="Input.DeliveryCredit"></label>
                        <input asp-for="Input.DeliveryCredit" class="form-control"/>
                        <div class="input-group-append">
                            <span class="input-group-text">€</span>
                        </div>
                        <span asp-validation-for="Input.DeliveryCredit" class="text-danger"></span>
                    </div>
                </div>
            </dd>
        @*}*@
    </dl>
    <form method="post">
        <div class="form-group">
            <button class="btn btn-primary" type="submit">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save" viewBox="0 0 16 16">
                    <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z"/>
                </svg>
                Submit
            </button>
        </div>
    </form>
</div>

@section Scripts
{
    <script>
        "use strict";

        $(document).ready(function() {
            $("#edit-role-btn").click(function() {
                $("#role-select").disabled = false;
            });
        });
    </script>
}